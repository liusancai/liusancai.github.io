{"pages":[{"title":"一个网络工程师的自述","text":"关于我一个资深网络工程师.长期从事网络运维工作，对网络管理有点心得，希望能够通过这个博客分享给大家。在工作中，积累了大量的实施工作经验。我系统地掌握了网络安全和系统安全方面的技术，涉及到服务器，防火墙，路由交换技术的配置和安全防护，能够独立处理非常规性网络异常，特别是针对因黑客攻击所引发的安全事故有一定的处理经验，熟练使用绿盟，天融信，深信服，启明星辰等主流网络安全厂商的安全设备，如：IPS，WAF，TAC，RSAS，上网行为管理器，防火墙设备。在网络自动化运维管理中，自己编写一款网络设备自动化运维工具软件，给自己在工作中节省很多时间，也希望给各位好友一起使用，因为需要对软件进行定制开发，更新，所以采取了授权方式，一个工程师版本的3年授权300元，欢迎大家联系，针对企业提供定制开发。(本网站作为唯一官方发布地址) 联系方式QQ: 313712640E-Mail: liusancai@aliyun.com个人博客: https://liusancai.github.io/工具下载(博客所有分享文件)：百度网盘: https://pan.baidu.com/s/1ogJjQkG7K3Og42kk-DHZEQ 提取码: cgv5","link":"/about/index.html"}],"posts":[{"title":"各类交换机配置关闭分页(more)提示","text":"在配置自动化运维的时候，我们对交换机进行巡检，因为不是人工手动操作，所以为了效率，我们需要对交换机配置关闭more提示，同时为了防止干扰 我们需要关闭终端提示，来达到最好的巡检效果。下面介绍各类交换机配置的方式： 华为和H3C的交换机配置方式一样： 1234undo info-center enable #关闭信息提示user-interface vty 0 4 #进入虚拟终端接口 screen-length 0 #关闭more提示 quit #退出 思科和锐捷交换机配置: 12345conf t #进入配置模式 logging monitor 0 #关闭提示 line vty 0 4 #进入虚拟终端模式 length 0 #配置关闭分页 end #退出到系统模式 迈普和贝尔交换机配置： 1234more off #关闭分页configure terminal #进入配置模式 logging monitor 0 #关闭分页模式 end #退出到系统模式 博达交换机配置： 123456config #进入配置模式 line vty 0 4 #进入虚拟终端配置 length 0 #关闭分页 exit #退出 exit #退出注意:博达交换机没有找到配置关闭信息提示配置项 中兴交换机配置： 1terminal length 0 #直接在系统模式配置 针对各类交换机恢复配置，只需要针对上面的配置，进行undo 或者 no 即可，不在演示。","link":"/2020/switch-0201/"},{"title":"博达交换机基础操作","text":"一、配置本地用户认证全局配置模式下创建用户，配置用户名为test用户，密码为testusername test password 0 test配置特权密码为testpasswordenable password testpassword开启密码加密，防止配置里明文保存密码service password-encryption配置认证为本地用户认证aaa authentication login default local 配置进行特权认证时使用enable的密码aaa authentication enable default enable配置示例： 12345bdcom_config#username test password 0 test bdcom_config#enable password testpassword bdcom_config#service password-encryption bdcom_config#aaa authentication login default local bdcom_config#aaa authentication enable default enable 二、配置VLAN全局配置模式下，创建vlan 10Vlan 10添加描述信息description Bangong配置示例： 12345bdcom#config bdcom_config#vlan 2 bdcom_config_vlan2#name Management bdcom_config_vlan2#exit bdcom_config# 三、端口加入VLAN配置access类型端口全局模式下进入端口配置模式进入fa0/1interface fastEthernet0/1配置端口模式为access模式switchport mode access配置端口所属vlanswitchport pvid 10配置示例： 12345bdcom_config#interface fastEthernet0/1 bdcom_config_f0/1#switchport mode access bdcom_config_f0/1#switchport pvid 10 bdcom_config_f0/1#exit bdcom_config# 配置trunk类型端口（trunk类型端口适用于交换机接交换机）全局模式下进入端口配置模式进入G0/1interface GigaEthernet0/1配置端口模式为trunk模式switchport mode trunk配置端口允许通过的VLANswitchport trunk vlan-allowed all配置示例： 12345bdcom_config#interface GigaEthernet0/1 bdcom_config_g0/1#switchport mode trunk bdcom_config_g0/1#switchport trunk vlan-allowed all bdcom_config_g0/1#exit bdcom_config# 四、配置接口 VLAN IP全局模式下进入vlanif接口配置模式进入vlan10 三层接口interface VLAN10配置IP地址 192.168.1.1 掩码255.255.255.0ip address 192.168.1.1 255.255.255.0配置示例： 12345bdcom#config bdcom_config#int vlAN 10 bdcom_config_v2#ip address 192.168.1.1 255.255.255.0 bdcom_config_v2#exit bdcom_config# 五、配置静态默认路由全局配置模式下，配置默认路由的下一跳为192.168.1.2ip route default 192.168.1.2配置静态路由：ip route 192.168.2.0 255.255.255.0 192.168.1.2 六、配置生成树选项生成树配置需要结合当地网络进行配置，要所有运行在一个拓扑能开启生成树功能的交换机，生成树配置一样。全局模式下关闭生成树功能No spanning-tree配置生成树模式为mstp(配置了模式就开启了生成树)spanning-tree mode mstp配置MST域名spanning-tree mstp nametest配置实例1包含vlan10,vlan20spanning-tree mstp instance 1 vlan 10,20激活MST域配置 active region-configuration不包含实例中的vlan，全部属于默认实例0，如vlan1默认属于实例0配置示例： 123bdcom_config#spanning-tree mode mstp bdcom_config#spanning-tree mstp name test bdcom_config#spanning-tree mstp instance 1 vlan 10 七、配置ACL访问控制策略进入acl配置模式ip access-list standard 2000 #数字可配置2000-2999,基础ACL配置，供电网络中采用基础acl#配置一条允许24.50.0.67主机permit 24.50.0.67 255.255.255.255配置一条允许23.50.6.0网段permit 23.50.6.0 255.255.255.0剩余的全部禁止 Deny any配置acl注意匹配规则是从上往下匹配，比如rule10 deny已经拒绝了除0,5匹配到的，剩余的都是禁止。这时候rule 15 permit source 23.50.7.0 0.0.0.255，则该策略不生效，23.50.7.0网段还是被全部禁止。配置示例： 123456bdcom_config#ip access-list standard 2000 bdcom_config_std#permit 24.50.0.67 255.255.255.255 bdcom_config_std#permit 23.50.6.0 255.255.255.0 bdcom_config_std#deny any bdcom_config_std#exit bdcom_config 八、配置SSH远程登陆全局开启ssh服务ip sshd enable配置ssh服务认证方法列表，默认情况下使用default列表，按照第一节的配置，default的认证方式是local。也可以直接新建认证方法。我们这里都采用默认的，下面命令可以不需要。ip sshd auth-method default配置ssh服务使用的ACL,需要先关闭服务才能启用控制列表ip sshd access-class 2000配置示例： 123bdcom_config#ip sshd auth-method default bdcom_config#ip sshd access-class 2000 bdcom_config#ip sshd enable 九、配置时钟同步和时区全局模式下配置时区为北京时区(加8小时)time-zone Beijin 8 0全局模式下配置时钟服务器10.109.192.5为第一个时钟服务器sntp server 10.109.192.5 1全局模式下配置时钟服务器10.109.192.43为备用时钟服务器sntp server 10.109.192.43配置示例： 123bdcom_config#time-zone Beijin 8 0 bdcom_config#sntp server 10.109.192.5 1 bdcom_config#sntp server 10.109.192.43 十、备份和还原IOS交换机用户模式下通过tftp备份iso固件到23.50.6.99服务器格式：copy flash:Switch.bin tftp:文件名 IPcopy flash:Switch.bin tftp:123.bin 23.50.6.99交换机用户模式下通过tftp服务器还原IOS到交换机中格式：copy tftp:123.bin flash:Switch.bin 23.50.6.99配置示例： 12bdcom#copy flash:Switch.bin tftp:123.bin 23.50.6.99 bdcom#copy tftp:123.bin flash:Switch.bin 23.50.6.99 Tftp服务器可以下载软件3CDaemon在电脑上运行即可。 十一、交换机常规巡检命令查看三层接口Ip地址show ip interface brief查看二层接口状态信息show interface brief查看交换机的mac地址表show mac address-table查看交换机的arp表show arp查看交换机的生成树状态show spanning-tree查看交换机版本show version查看交换机cpu使用状态Showcpu查看交换机内存使用状态show memory region","link":"/2020/bd-basic/"},{"title":"迈普交换机基础操作","text":"一、配置本地用户认证全局配置模式下configure terminal创建用户，配置用户名为test用户，密码为test，权限为15级username test privilege 15 password 0 test打开本地认证方式authentication line vty login local配置特权密码testpasswordenable password level 15 testpassword配置示例： 12345Switch&gt;enable Switch#configure terminal Switch(config)#username test privilege 15 password 0 test Switch(config)#authentication line vty login local Switch(config)#enable password level 15 testpassword 二、配置VLAN全局配置模式下，创建vlan 10Vlan 10添加描述信息name Bangong配置示例：Switch(config)#vlan 10Switch(config-vlan10)#name bangong三、端口加入VLAN配置access类型端口全局模式下进入端口配置模式进入G0/1interface gigabitethernet0/1配置端口类型为accessswitchport mode access配置端口所属vlanswitchport access vlan 10打开端口(如果端口关闭)no shutdown配置示例： 12345678Switch#configure terminal Switch(config)#interface gigabitethernet 0/1 Switch(config-if-gigabitethernet0/1)#switchport mode access Switch(config-if-gigabitethernet0/1)#switchport access vlan 10 Switch(config-if-gigabitethernet0/1)#no shutdown Switch(config-if-gigabitethernet0/1)#exit Switch(config)#exit Switch# 配置trunk类型端口（trunk类型端口适用于交换机接交换机）全局模式下进入端口配置模式进入G0/48interface gigabitethernet0/48配置端口模式为trunk模式switchport mode trunk配置端口允许通过的VLANswitchport trunk allowed vlan all配置默认的pvid，不配置的情况下默认pvid为1switchport trunk pvid vlan 1配置示例： 123456789Switch#configure terminal Switch(config)#interface gigabitethernet 0/48 Switch(config-if-gigabitethernet0/48)#switchport mode trunk Switch(config-if-gigabitethernet0/48)#switchport trunk allowed vlan all Switch(config-if-gigabitethernet0/48)#switchport trunk pvid vlan 1 Switch(config-if-gigabitethernet0/48)#no shutdown Switch(config-if-gigabitethernet0/48)#exit Switch(config)#exit Switch# 三、配置接口 VLAN IP全局模式下进入vlanif接口配置模式进入vlan10 三层接口interface vlan 10配置IP地址 192.168.1.1 掩码255.255.255.0ip address 192.168.1.1 255.255.255.0配置示例： 123456Switch#configure terminal Switch(config)#interface vlan 10 Switch(config-if-vlan10)#ip address 192.168.1.1 255.255.255.0 Switch(config-if-vlan10)#exit Switch(config)#exit Switch# 四、配置静态默认路由全局配置模式下，配置默认路由的下一跳为192.168.1.2ip route 0.0.0.0 0.0.0.0 192.168.1.2静态路由配置和默认路由配置命令一样，命令中前0.0.0.0 代表网络号，后面一个0.0.0.0代表掩码。这8个0则能代表所有网段。代码一个24未掩码的网段表示：192.168.2.0 255.255.255.0配置静态路由：ip route 192.168.2.0 255.255.255.0 192.168.1.2配置示例：Switch(config)#ip route 0.0.0.0 0.0.0.0 192.168.1.2 五、配置生成树选项生成树配置需要结合当地网络进行配置，要所有运行在一个拓扑能开启生成树功能的交换机，生成树配置一样。如果不知道在运行的生成树实例的情况下，建议暂时不配置生成树，避免生成树造成冲突。全局模式下开启生成树功能spanning-tree enable全局模式下关闭生成树功能no spanning-tree enable配置生成树模式为mstpspanning-tree mode mstp进入多实例生成树MSTP配置spanning-tree mst configuration配置生成树域名testregion-name test配置实例1包含vlan10instance 1 vlan 10配置实例2包含vlan20instance 2 vlan 20激活生成树配置active configuration pending不包含实例中的vlan，全部属于默认实例0，如vlan1默认属于实例0配置示例： 12345678910Switch#configure terminal (config)#spanning-tree enable Switch(config)#spanning-tree mode mstp Switch(config)#spanning-tree mst configuration Switch(config-mst)#region-name test Switch(config-mst)#instance 1 vlan 10 Switch(config-mst)#instance 2 vlan 20 Switch(config-mst)#active configuration pending Switch(config-mst)#exit Switch(config)# 六、配置ACL访问控制策略进入acl配置模式ip access-list standard 100 #数字可配置1-1000,基础ACL配置，供电网络中采用基础acl#配置一条允许23.50.0.99主机10 permit host 23.50.6.99配置一条允许23.50.6.0网段20 permit 23.50.6.0 255.255.255.0剩余的全部禁止30 deny any配置acl注意匹配规则是从上往下匹配，比如deny any已经拒绝了除10,20匹配到的，剩余的都是禁止。这时候40 permit 23.50.7.0 0.0.0.255，则该策略不生效，23.50.7.0网段还是被全部禁止。配置示例： 1234Switch(config)#ip access-list standard 100 Switch(config-std-nacl)#10 permit host 23.50.6.99 Switch(config-std-nacl)#20 permit 23.50.6.0 255.255.255.0 Switch(config-std-nacl)#30 deny any 七、配置SSH远程登陆全局开启ssh服务ip ssh server进入配置交换机的vty接口模式下，下面相当于可以同时5个人登陆这台交换机user-interface vty 0 4配置远程登陆的认证模式为AAA，即为本地用户认证login local设置超时5分钟自动断开回话exec-timeout 5 0配置只允许ssh方式登陆交换机Protocol input ssh配置示例： 1234567Switch(config)#line vty 0 4 Switch(config-line)#login local Switch(config-line)#exec-timeout 5 0 Switch(config-line)#protocol input ssh Switch(config-line)#privilege level 0 Switch(config-line)#exit Switch(config)# 八、配置时钟同步和时区全局模式下配置时区为北京时区(加8小时)clock timezone beijin 8全局模式下配置时钟服务器10.109.192.5为第一个时钟服务器ntp server 10.109.192.5全局模式下配置时钟服务器10.109.192.43为备用时钟服务器ntp server 10.109.192.43配置示例： 1234Switch#configure terminal Switch(config)#clock timezone beijin 8 Switch(config)#ntp server 10.109.192.5 Switch(config)#ntp server 10.109.192.5 九、备份和还原IOS特权配置模式下进入文件操作管理filesystem交换机用户模式下通过tftp备份iso固件到23.50.6.99服务器格式：copy file-system 本地固件文件名 tftp 服务器IP 远程文件名copy file-system web-Spl-1.1.235.rom tftp 23.50.6.99 123.rom交换机用户模式下通过tftp服务器还原IOS到交换机中格式：copy tftp 服务器IP 远程文件名file-system 本地固件文件名copy tftp 23.50.6.99 234 file-system 234使用dir命令，查看交换机固件的文件名称配置示例： 1234Switch#filesystem Switch(config-fs)#dir Switch(config-fs)#copy file-system sp4-g-6.6.4.1.18(C).pck tftp 23.50.6.99 123.pck Switch(config-fs)#copy tftp 23.50.6.99 123.pck file-system sp4-g-6.6.4.1.18(C).pck Tftp服务器可以下载软件3CDaemon在电脑上运行即可。 十一、交换机常规巡检命令查看三层接口Ip地址show ip interface brief查看二层接口状态信息show interface switchport brief查看交换机的mac地址表show mac-address all查看交换机的arp表show arp查看交换机的生成树状态show spanning-tree查看交换机版本show version查看交换机系统时间show clock查看交换机电源状态show power查看交换机cpu使用状态show cpu monitor查看交换机内存使用状态show memory","link":"/2020/maipu/"},{"title":"网络设备自动备份工具软件","text":"一、软件介绍随着企业信息化的发展，更多的业务依赖于网络，核心业务对网络的要求更加的高，作为企业的网络管理人员，面对的大量的网络设备，造成了日常维护工作量大，没有有效的方式进行统一管理配置，不能快速的定位网络故障点，更新配置时需要手动登录交换机一台台的操作，给日常运维带来了很大的挑战。 虽然市场上有着成熟的网管软件，但是存在价格昂贵，部署复杂，自定义内容的配置少，不够自定义巡检内容，不能够批量下发配置等功能限制，导致很多企业的网管还是处在初期的人工手动维护状态，本软件具有程序小，无需部署，无需安装，使用方便等特点，主要功能如下： 批量巡检 自定义巡检 批量关闭空闲端口 批量开启全部端口 配置端口安全功能 批量保存配置目前软件支持市场长大部分厂家设备，华为，华三，思科，锐捷，中兴，博达，迈普，贝尔等8个厂商的设备。软件支持二次定制开发，根据网络中的设备进行匹配。二、软件功能 批量巡检功能自动登录网络设备，执行命令，形成日志文件后，分析文件生成巡检报告，报告内容包含单台网络设备的启动设备，设备版本，风扇，电源，cpu，内存使用率等，对在网的所有设备的mac地址表和arp表进行整合表格，方便了解网络设备和终端设备的信息。只有日常巡检能够生成报表，其他功能无报表。 自定义巡检功能能够根据自定义的命令对交换机下发配置命令，打开conf文件夹下的各厂商配置文件，在def=字段后面输入本次需要执行的命令即可。 批量关端空闲端口，通过运行交换机查看mac地址的命令，进行分析端口下的mac地址情况，对于没有使用的端口进行自动关闭操作。 批量开启全部端口，通过分析设备的运行配置分析出设备的所有端口，根据分析出的端口列表，自动进入端口模式，执行开启端口操作。 配置端口安全功能是根据分析端口下的配置信息，mac地址信息，自动根据预设好的端口安全配置方式，进行全网设备的统一配置。 批量保存配置功能是根据设备列表登录到设备中，执行保存配置的命令，为了防止配置丢失导致的网络故障。三、使用准备使用软件之前，需要准备一个设备列表的excel文件，按照示例内容填写。主要如下：序号 IP 用户名 密码 特权密码 厂商 端口 设备功能 站点名称 备注1 192.168.1.1 user password rootword h3c 22 switch 测试12 192.168.1.2 user password h3c 22 router 测试2提示：该文件保存了设备的用户密码信息，请管理员妥善保管此文件，防止文件泄露，造成网络信息安全问题。定制功能使用前先测试，各位工程师的配置不太一样。下载地址：百度网盘链接: https://pan.baidu.com/s/1DXoZdMQ3SXuCHEy_HB5J_w本软件采用离线授权的方式，具体费用请联系作者","link":"/2020/switch-back/"},{"title":"H3C交换机基础操作","text":"一、配置本地用户认证全局配置模式下 创建用户，配置用户名为test用户 local-user test class manage 配置用户密码为Password123 password simple Password123 配置用户登录方式为SSH service-type ssh 配置用户权限等级为0 authorization-attribute user-role level-0 配置特权密码为testpassword super password simple testpassword 配置示例： 12345678[H3C]local-user test class manageNew local user added.[H3C-luser-manage-test]password simple Password123[H3C-luser-manage-test]service-type ssh[H3C-luser-manage-test]authorization-attribute user-role level-0[H3C-luser-manage-test]exit[H3C]super password simple testpassword[H3C] 二、配置VLAN全局配置模式下，创建vlan 10 Vlan 10 添加描述信息 description Bangong 配置示例： 12345[H3C]vlan 10[H3C-vlan10]des[H3C-vlan10]description Bangong[H3C-vlan10]exit[H3C] 三、端口加入VLAN配置access类型端口 全局模式下进入端口配置模式 进入G1/0/1 interface GigabitEthernet 1/0/1 配置端口模式为access模式 port link-type access 配置端口所属vlan port access vlan 10 配置示例： 123456[H3C]interface GigabitEthernet 1/0/1[H3C-GigabitEthernet1/0/1]interface GigabitEthernet 1/0/1[H3C-GigabitEthernet1/0/1]port link-type access[H3C-GigabitEthernet1/0/1]port access vlan 10[H3C-GigabitEthernet1/0/1]exit[H3C] 配置trunk类型端口（trunk类型端口适用于交换机接交换机） 全局模式下进入端口配置模式 进入G1/0/24 interface GigabitEthernet 1/0/24 配置端口模式为trunk模式 port link-type trunk 配置端口允许通过的VLAN port trunk permit vlan 10 20 配置示例： 12345[H3C]interface GigabitEthernet 1/0/24[H3C-GigabitEthernet1/0/24]port link-type trunk[H3C-GigabitEthernet1/0/24]port trunk permit vlan 10 20[H3C-GigabitEthernet1/0/24]exit[H3C] 四、配置接口 VLAN IP全局模式下进入vlanif接口配置模式 进入vlan10 三层接口 interface Vlan-interface 10 配置IP地址 192.168.1.1 掩码255.255.255.0 ip address 192.168.1.1 255.255.255.0 配置示例： 1234[H3C]interface Vlan-interface 10[H3C-Vlan-interface10]ip address 192.168.1.1 255.255.255.0[H3C-Vlan-interface10]exit[H3C] 五、配置静态默认路由全局配置模式下，配置默认路由的下一跳为192.168.1.2 ip route-static 0.0.0.0 0.0.0.0 192.168.1.2 静态路由配置和默认路由配置命令一样，命令中前0.0.0.0 代表网络号，后面一个0.0.0.0代表掩码。这8个0则能代表所有网段。代码一个24未掩码的网段表示：192.168.2.0 255.255.255.0 配置静态路由： ip route-static 192.168.2.0 255.255.255.0 192.168.1.2 六、配置生成树选项生成树配置需要结合当地网络进行配置，要所有运行在一个拓扑能开启生成树功能的交换机，生成树配置一样。 全局模式下开启生成树功能 Stp enable 全局模式下关闭生成树功能 Stp disable 进入MST域视图 stp region-configuration 配置MST域名 region-name aqhn 配置实例1包含vlan10 instance 1 vlan 18 配置实例2包含vlan20 instance 2 vlan 20 激活MST域配置 active region-configuration 不包含实例中的vlan，全部属于默认实例0，如vlan1默认属于实例0 配置示例： 1234567[H3C]stp region-configuration[H3C-mst-region]region-name aqhn[H3C-mst-region]instance 1 vlan 10[H3C-mst-region]instance 2 vlan 20[H3C-mst-region]active region-configuration[H3C-mst-region]exit[H3C] 七、配置ACL访问控制策略进入acl配置模式 acl number 2000 或者 acl basic 2000 #number数字可配置2000-2999,基础ACL配置. 配置一条允许24.50.0.67主机 rule 0 permit source 24.50.0.67 0 配置一条允许23.50.6.0网段 rule 5 permit source 23.50.6.0 0.0.0.255 剩余的全部禁止 rule 10 deny 配置acl注意匹配规则是从上往下匹配，比如rule10 deny已经拒绝了除0,5匹配到的，剩余的都是禁止。这时候rule 15 permit source 23.50.7.0 0.0.0.255，则该策略不生效，23.50.7.0网段还是被全部禁止。 配置示例： 123456[H3C]acl basic 2000[H3C-acl-ipv4-basic-2000]rule 0 permit source 24.50.0.67 0[H3C-acl-ipv4-basic-2000]rule 5 permit source 23.50.6.0 0.0.0.255[H3C-acl-ipv4-basic-2000]rule 10 deny[H3C-acl-ipv4-basic-2000]exit[H3C] 八、配置SSH远程登陆全局开启ssh服务 ssh server enable 配置用户test使用ssh服务时采用密码登陆 ssh user test service-type stelnet authentication-type password 本地创建RSA加密类型密钥对 public-key local create rsa 本地创建DSA加密类型密钥对 public-key local create dsa 建议比较老的交换机同时生成这2个类型的加密密钥。否则可能导致不能使用ssh2方式登陆。 进入配置交换机的vty接口模式下，下面相当于可以同时5个人登陆这台交换机 user-interface vty 0 4 配置远程登陆的认证模式为AAA，即为本地用户认证 authentication-mode scheme 设置超时5分钟自动断开回话 idle-timeout 5 0 配置只允许ssh方式登陆交换机 protocol inbound ssh 配置示例： 12345678910[H3C]ssh server enable[H3C]ssh user test service-type stelnet authentication-type password[H3C]user-interface vty 0 4[H3C-line-vty0-4]authentication-mode scheme[H3C-line-vty0-4]idle-timeout 5 0[H3C-line-vty0-4]protocol inbound ssh[H3C-line-vty0-4]exit[H3C]public-key local create rsa[H3C]public-key local create dsa[H3C] 九、配置时钟同步和时区全局模式下配置时区为北京时区(加8小时) [H3C]clock timezone BeiJin add 8 全局模式下配置时钟服务器10.109.192.5为第一个时钟服务器 [H3C]ntp-service unicast-server 10.109.192.5 priority 全局模式下配置时钟服务器10.109.192.43为备用时钟服务器 [H3C] ntp-service unicast-server 10.109.192.43 十、备份和还原IOS交换机用户模式下通过tftp备份iso固件到23.50.6.99服务器 格式：tftp 服务器IP put 本地文件名 [远程文件名] tftp 23.50.6.99 put s31ei_e-cmw310-r2108p04.bin [可选配置重命名文件] 交换机用户模式下通过tftp服务器还原IOS到交换机中 格式：tftp 服务器IP get 远程文件名 [本地文件名] tftp 23.50.6.99 get s31ei_e-cmw310-r2108p04.bin [可选下载到交换机后文件重命名] 配置示例： 通过display boot-loader命令查看当前交换机使用的IOS文件名 12345678&lt;H3C&gt;display boot-loader Unit 1: The current boot app is: s31ei_e-cmw310-r2108p04.bin The main boot app is: s31ei_e-cmw310-r2108p04.bin The backup boot app is: &lt;H3C&gt;&lt;H3C&gt;tftp 23.50.6.99 put s31ei_e-cmw310-r2108p04.bin &lt;H3C&gt;tftp 23.50.6.99 get s31ei_e-cmw310-r2108p04.bin Tftp服务器可以下载软件3CDaemon在电脑上运行即可。 十一、交换机常规巡检命令查看三层接口Ip地址 display ip interface brief 查看二层接口状态信息 display interface brief 查看交换机的mac地址表 display mac-address 查看交换机的arp表 display arp 查看交换机的生成树状态 display stp brief 查看交换机版本 display version 查看交换机系统时间 display clock 查看交换机电源状态 display power 查看交换机风扇状态 display fan 查看交换机cpu使用状态 display cpu-usage history 查看交换机内存使用状态 display memory","link":"/2020/swithc-h3c-01/"},{"title":"中兴交换机端口安全配置","text":"中兴5950 配置端口mac绑定和禁止学习功能 配置前先查看下端口下的mac地址表: 123456AQYX-LaiBangBian-S5950-1#show mac table interface gei-0/1/1/6Total MAC address : 2 MAC VLAN Outgoing Information Attribute From Time-------------- ---- ---------------------------- -------------- ---- -----------6002.9220.e834 9 gei-0/1/1/6 Dynamic 0 00:00:06:156002.9261.7dfd 9 gei-0/1/1/6 Dynamic 0 00:00:06:15 配置端口禁止学习mac地址 1234AQYX-LaiBangBian-S5950-1#conf t //进入配置模式Enter configuration commands, one per line. End with CTRL/Z.AQYX-LaiBangBian-S5950-1(config)#mac //进入mac全局配置模式AQYX-LaiBangBian-S5950-1(config-mac)#learning disable interface gei-0/1/1/6 //命令格式learning disable interface 端口 配置该命令后，最长300smac老化之后，重新使用命令show mac table interface gei-0/1/1/6查看mac地址，会发现原mac地址已经清除。添加永久mac地址到端口 12AQYX-LaiBangBian-S5950-1(config-mac)#add permanent 6002.9220.e834 interface gei-0/1/1/6 all-owner-vlan //添加永久地址表，重启依然生效。格式 add permanent MAC地址 interface 端口 all-owner-vlanAQYX-LaiBangBian-S5950-1(config-mac)#add permanent 6002.9261.7dfd interface gei-0/1/1/6 all-owner-vlan 查看mac相关配置 12345678AQYX-LaiBangBian-S5950-1#show running-config mac!&lt;mac&gt;mac learning disable interface gei-0/1/1/6 add permanent 6002.9261.7dfd interface gei-0/1/1/6 vlan 9 add permanent 6002.9220.e834 interface gei-0/1/1/6 vlan 9$!&lt;/mac&gt; 查看地址表，状态变为permanent 123456789101112AQYX-LaiBangBian-S5950-1#show mac table permanent Total MAC address : 2 Flags: Src--Source filter, Dst--Destination filter From:0,driver;1,config;2,VPN;3,802.1X;4,micro;5,DHCP; 6,PBT;7,EVB;8,OTV;9,TRILL;10,ESADI, Time--Day:Hour:Min:Sec MAC VLAN Outgoing Information Attribute From Time-------------- ---- ---------------------------- -------------- ---- -----------6002.9220.e834 9 gei-0/1/1/6 Permanent 1 N/A 6002.9261.7dfd 9 gei-0/1/1/6 Permanent 1 N/A","link":"/2020/zte-port-sec/"},{"title":"中兴交换机基础操作","text":"一、配置本地用户认证全局配置模式下，进入系统用户配置视图system-user创建用户，配置用户名为test用户user-name test配置用户密码为testpassword test绑定认证模板bind authentication-template 1绑定授权模板bind authorization-template 1exit 退出到用户配置视图，配置认证模板authentication-template 1绑定AAA认证模板bind aaa-authentication-template 2001exit退出到用户配置视图，配置授权模板authorization-template 1配置绑定AAA授权模板bind aaa-authorization-template 2001配置授权权限为15级local-privilege-level 15退出到全局模式下，进入配置AAA认证模板aaa-authentication-template 2001配置认证方式为localaaa-authentication-type local退出到全局模式下，进入配置AAA授权模板aaa-authorization-template 2001配置授权方式为noneaaa-authorization-type none退出到全局配置模式下，配置enable密码enable secret level 15 testpassword配置示例： 12345678910111213141516171819202122ZTE#config terminal ZTE(config)#system-user ZTE(config-system-user)#user-name test ZTE(config-system-user-username)#password test ZTE(config-system-user-username)#bind authentication-template 1 ZTE(config-system-user-username)#bind authorization-template 1 ZTE(config-system-user-username)#exit ZTE(config-system-user)#authentication-template 1 ZTE(config-system-user-authen-temp)#bind aaa-authentication-template 2001 ZTE(config-system-user-authen-temp)#exit ZTE(config-system-user)#authorization-template 1 ZTE(config-system-user-author-temp)#bind aaa-authorization-template 2001 ZTE(config-system-user-author-temp)#local-privilege-level 15 ZTE(config-system-user-author-temp)#exit ZTE(config-system-user)#exit ZTE(config)#aaa-authentication-template 2001 ZTE(config-aaa-authen-template)#aaa-authentication-type local ZTE(config-aaa-authen-template)#exit ZTE(config)#aaa-authorization-template 2001 ZTE(config-aaa-author-template)#aaa-authorization-type none ZTE(config-aaa-author-template)#exit ZTE(config)#enable secret level 15 testpassword 二、配置VLAN全局配置模式下，进入vlan配置视图switchvlan-configuration创建vlan10Vlan 10为vlan10命名，即添加描述name Bangong配置示例： 123456ZTE(config)#switchvlan-configuration ZTE(config-swvlan)#vlan 10 ZTE(config-swvlan-sub-10)#name banggong ZTE(config-swvlan-sub-10)#exit ZTE(config-swvlan)#exit ZTE(config)# 三、端口加入VLAN配置ACCESS类型端口全局模式下，进入switchvlan配置模式switchvlan-configuration进入gei-0/1/1/1interface gei-0/1/1/1配置端口模式为access模式switchport mode access配置端口所属vlanswitchport access vlan 10配置示例： 12345678ZTE(config)# ZTE(config)#switchvlan-configuration ZTE(config-swvlan)#interface gei-0/1/1/1 ZTE(config-swvlan-if-gei-0/1/1/11)#switchport mode access ZTE(config-swvlan-if-gei-0/1/1/11)#switchport access vlan 10 ZTE(config-swvlan-if-gei-0/1/1/11)#exit ZTE(config-swvlan)#exit ZTE(config)# 配置Trunk端口（Trunk端口用于交换机和交换机直接互联）进入gei-0/1/1/28interface gei-0/1/1/28配置端口模式为trunk模式switchport mode trunk配置端口允许vlan通过10 20switchport trunk vlan 10,20配置示例： 12345678ZTE(config)# ZTE(config)#switchvlan-configuration ZTE(config-swvlan)#interface gei-0/1/1/28 ZTE(config-swvlan-if-gei-0/1/1/28)#switchport mode trunk ZTE(config-swvlan-if-gei-0/1/1/28)#switchport trunk vlan 10,20 ZTE(config-swvlan-if-gei-0/1/1/28)#exit ZTE(config-swvlan)#exit ZTE(config)# 四、配置接口 VLAN IP全局模式下进入vlanif接口配置模式进入vlan10 三层接口interface vlan10配置IP地址 192.168.1.1 掩码255.255.255.0ip address 192.168.1.1 255.255.255.0配置示例： 1234ZTE(config)#interface vlan10 ZTE(config-if-vlan10)#ip address 192.168.1.1 255.255.255.0 ZTE(config-if-vlan10)#exit ZTE(config)# 五、配置静态默认路由全局配置模式下，配置默认路由的下一跳为192.168.1.2ip route 0.0.0.0 0.0.0.0 192.168.1.2静态路由配置和默认路由配置命令一样，命令中前0.0.0.0 代表网络号，后面一个0.0.0.0代表掩码。这8个0则能代表所有网段。代码一个24未掩码的网段表示：192.168.2.0 255.255.255.0配置静态路由：ip route 192.168.2.0 255.255.255.0 192.168.1.2 六、配置生成树选项生成树配置需要结合当地网络进行配置，要所有运行在一个拓扑能开启生成树功能的交换机，生成树配置一样。中兴交换机在目前的网络环境中主要作为三层设备，不建议开启生成树。全局模式下进入生成树配置spantree开启生成树功能enable配置生成树模式mstpmode mstp配置多实例域名testmst name test配置实例1包含vlan10,20mst vlans 10,20 instance 1配置示例： 1234567ZTE(config)#spantree ZTE(config-stp)#enable ZTE(config-stp)#mode mstp ZTE(config-stp)#mst name test ZTE(config-stp)#mst vlans 10,20 instance 1 ZTE(config-stp)#exit ZTE(config)# 七、配置ACL访问控制策略进入acl配置模式数字可配置2000-2999,基础ACL配置，供电网络中采用基础acl#配置一条允许24.50.0.67主机rule 0 permit source 24.50.0.67 0.0.0.0配置一条允许23.50.6.0网段rule 5 permit source 23.50.6.0 0.0.0.255剩余的全部禁止 rule 10 deny配置acl注意匹配规则是从上往下匹配，比如rule10 deny已经拒绝了除0,5匹配到的，剩余的都是禁止。这时候rule 15 permit source 23.50.7.0 0.0.0.255，则该策略不生效，23.50.7.0网段还是被全部禁止。配置示例： 1234567ZTE#configure terminal ZTE(config)#ipv4-access-list 2000 ZTE(config-ipv4-acl)# rule 0 permit source 24.50.0.67 0.0.0.0 ZTE(config-ipv4-acl)# rule 5 permit source 23.50.6.0 0.0.0.255 ZTE(config-ipv4-acl)# rule 10 deny ZTE(config-ipv4-acl)# exit ZTE(config)# 八、配置SSH远程登陆全局开启ssh服务ssh server enable配置ssh服务应用ACL访问控制策略2000ssh server access-class ipv4 2000配置示例： 12ZTE(config)#ssh server enable ZTE(config)#ssh server access-class ipv4 2000 九、配置时钟同步和时区用户模式下配置时区为北京时区(加8小时)ZTE(config)#clock timezone beijin 8全局模式下配置时钟服务器10.109.192.5为第一个时钟服务器(config)#ntp server 10.109.192.5 priority 5全局模式下配置时钟服务器10.109.192.43为备用时钟服务器(config)#ntp server 10.109.192.43 priority 4 十、备份和还原IOS在交换机全局模式下通过tftp备份iso固件到23.50.6.99服务器,中兴交换机固件名为HMPU.set格式：copy tftp root：文件名 //服务器IP/文件名copy tftp root: /flash/HMPU.set //23.50.6.99/HMPU.set在交换机下全局模式下通过tftp服务器还原IOS到交换机中格式：tftp 服务器IP get 远程文件名 [本地文件名]copy tftp //23.50.6.99/HMPU.set root: HMPU2.set配置示例： 12ZTE#copy tftp root: HMPU.set //23.50.6.99/HMPU.set ZTE#copy tftp //23.50.6.99/HMPU.set root: HMPU2.set Tftp服务器可以下载软件3CDaemon在电脑上运行即可。 十一、交换机常规巡检命令查看三层接口Ip地址show ip interface brief查看二层接口状态信息show interface brief查看交换机的mac地址表show mac table查看交换机的arp表show arp查看交换机的生成树状态show spantree instance 0查看交换机版本show version查看交换机系统时间show clock查看交换机电源状态show power查看交换机风扇状态show fan查看交换机cpu和内存使用状态show processor查看交换机运行配置show running-config查看交换机日志告警show logging alarm查看日志文件show logfile","link":"/2020/zte-basic/"},{"title":"下载腾讯奇异优酷视频方法","text":"下载腾讯奇异优酷视频方法在腾讯视频上看到好的视频如何将他保存到本地，比如作为小学老师发现有好的视频，教室里没有网络，或者打开网站太多广告，实在惨不忍睹，所以需要保存下来本地播放，下面这个方法可以给分享给大家： 利用浏览器打开视频网站，播放视频，如：https://v.qq.com/x/page/r3055j54606.html 这是小学二年级的生字书写，挺好的。开始播放后，按键盘上的F12，打开了控制台，点击查看器，可以查看网页的内容。 搜索MP4或者FLV等常用视频后缀，就可以查到视频的真实地址。截图中的src=’’的内容就是真实的视频下载地址， 我们可以点击新标签页打开链接， 就可以看到我们的视频,我们可以查看这视频保存下来即可 我们在查看视频的时候，发现视频长度短了，那是因为视频被分割成几个小段，这时候假设第一个视频时间长度为5分钟，我们回到腾讯视频中，把视频拖到6分钟的时候，再重复2-4的步骤就可以了。 有些视频我们无法找到通过上面的办法直接找到链接地址，如：https://v.qq.com/x/page/h30551ages5.html这个时候我们还是利用控制台，点击到网络，同时点击XRS。这个时候我们查看文件一列，看到有1.ts字样的，这就是我们要找的视频，点击其中一行显示详细的消息头，我们看到了这个文件的真实地址 1https://apd-a7d084eea7965209bb1551cf1c0f593d.v.smtcdns.com/omts.tc.qq.com/A8S3m5nlRjrxt04Mt_-o-eGJ04-tLv8ISw9nYgYhY5t0/uwMROfz2r5zAoaQXGdGnC2df644E7D3uP8M8pmtgwsRK9nEL/VUE3gZr2ZPhq10P0-RmfVXVrlx6TMU0gM7I2hVVv9a5R8oPmGhW8UL8MPsnNlaargz1Yh8LqLhrUS7AcA6D6asmUbAT1M60KEhVduCq8kWOvpyxs-sDsIfC4DyyByzXSPeKda9UqP6RCuLZr1rvLrdQz22HM3gMILhwOZ15QEdg/016_h30551ages5.321002.1.ts 用这个链接执教下载即可，和上面一样如果视频被分割了需要多寻找，但是这里会有一个规律，文化命名的方式是 1 2 3 所以可以看出来第一个文件016_h30551ages5.321002.1.ts 第二个016_h30551ages5.321002.2.ts 第三个016_h30551ages5.321002.3.ts 我们只需要改动后面的编号即可。","link":"/2020/get-video/"}],"tags":[{"name":"自动化运维","slug":"自动化运维","link":"/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/"},{"name":"交换机","slug":"交换机","link":"/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/"},{"name":"华为","slug":"华为","link":"/tags/%E5%8D%8E%E4%B8%BA/"},{"name":"博达","slug":"博达","link":"/tags/%E5%8D%9A%E8%BE%BE/"},{"name":"迈普","slug":"迈普","link":"/tags/%E8%BF%88%E6%99%AE/"},{"name":"备份","slug":"备份","link":"/tags/%E5%A4%87%E4%BB%BD/"},{"name":"H3C","slug":"H3C","link":"/tags/H3C/"},{"name":"华三","slug":"华三","link":"/tags/%E5%8D%8E%E4%B8%89/"},{"name":"ZTE","slug":"ZTE","link":"/tags/ZTE/"},{"name":"中兴","slug":"中兴","link":"/tags/%E4%B8%AD%E5%85%B4/"},{"name":"视频下载","slug":"视频下载","link":"/tags/%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD/"},{"name":"腾讯视频","slug":"腾讯视频","link":"/tags/%E8%85%BE%E8%AE%AF%E8%A7%86%E9%A2%91/"},{"name":"爱奇异视频","slug":"爱奇异视频","link":"/tags/%E7%88%B1%E5%A5%87%E5%BC%82%E8%A7%86%E9%A2%91/"}],"categories":[{"name":"网络技术","slug":"网络技术","link":"/categories/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/"},{"name":"网络基础","slug":"网络技术/网络基础","link":"/categories/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/"},{"name":"生活","slug":"生活","link":"/categories/%E7%94%9F%E6%B4%BB/"}]}