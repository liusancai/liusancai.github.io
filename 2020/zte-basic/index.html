<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>中兴交换机基础操作 - 自由的网工</title>









<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-1-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="中兴交换机基础操作" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-end">
                
                
                
            </div>
        </div>
    </div>
</nav>
    

    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-12 has-order-2 column-main">

<div class="card">
    
	
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
					
                <time class="level-item has-text-grey" datetime="2020-02-03T03:30:04.000Z">2020-02-03</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/">网络技术</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">网络基础</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1627 个字)
                </span>
                
				
					<span class="level-item has-text-grey">
					<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
					</script>
					<class="article-titles"> 浏览：<span id="busuanzi_value_page_pv"></span>
					</span>
								
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                中兴交换机基础操作
            
        </h1>
        <div class="content">
			<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
            <h1 id="一、配置本地用户认证"><a href="#一、配置本地用户认证" class="headerlink" title="一、配置本地用户认证"></a>一、配置本地用户认证</h1><p>全局配置模式下，进入系统用户配置视图<br>system-user<br>创建用户，配置用户名为test用户<br>user-name test<br>配置用户密码为test<br>password test<br>绑定认证模板<br>bind authentication-template 1<br>绑定授权模板<br>bind authorization-template 1<br>exit   </p>
<a id="more"></a> 
<p>退出到用户配置视图，配置认证模板<br>authentication-template 1<br>绑定AAA认证模板<br>bind aaa-authentication-template 2001<br>exit<br>退出到用户配置视图，配置授权模板<br>authorization-template 1<br>配置绑定AAA授权模板<br>bind aaa-authorization-template 2001<br>配置授权权限为15级<br>local-privilege-level 15<br>退出到全局模式下，进入配置AAA认证模板<br>aaa-authentication-template 2001<br>配置认证方式为local<br>aaa-authentication-type local<br>退出到全局模式下，进入配置AAA授权模板<br>aaa-authorization-template 2001<br>配置授权方式为none<br>aaa-authorization-type none<br>退出到全局配置模式下，配置enable密码<br>enable secret level 15 testpassword<br>配置示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ZTE#config terminal     </span><br><span class="line">ZTE(config)#system-user     </span><br><span class="line">ZTE(config-system-user)#user-name test    </span><br><span class="line">ZTE(config-system-user-username)#password test    </span><br><span class="line">ZTE(config-system-user-username)#bind authentication-template 1    </span><br><span class="line">ZTE(config-system-user-username)#bind authorization-template 1    </span><br><span class="line">ZTE(config-system-user-username)#exit             </span><br><span class="line">ZTE(config-system-user)#authentication-template 1    </span><br><span class="line">ZTE(config-system-user-authen-temp)#bind aaa-authentication-template 2001    </span><br><span class="line">ZTE(config-system-user-authen-temp)#exit    </span><br><span class="line">ZTE(config-system-user)#authorization-template 1    </span><br><span class="line">ZTE(config-system-user-author-temp)#bind aaa-authorization-template 2001    </span><br><span class="line">ZTE(config-system-user-author-temp)#local-privilege-level 15    </span><br><span class="line">ZTE(config-system-user-author-temp)#exit    </span><br><span class="line">ZTE(config-system-user)#exit    </span><br><span class="line">ZTE(config)#aaa-authentication-template 2001    </span><br><span class="line">ZTE(config-aaa-authen-template)#aaa-authentication-type local    </span><br><span class="line">ZTE(config-aaa-authen-template)#exit    </span><br><span class="line">ZTE(config)#aaa-authorization-template 2001    </span><br><span class="line">ZTE(config-aaa-author-template)#aaa-authorization-type none     </span><br><span class="line">ZTE(config-aaa-author-template)#exit    </span><br><span class="line">ZTE(config)#enable secret level 15 testpassword</span><br></pre></td></tr></table></figure>
<h1 id="二、配置VLAN"><a href="#二、配置VLAN" class="headerlink" title="二、配置VLAN"></a>二、配置VLAN</h1><p>全局配置模式下，进入vlan配置视图<br>switchvlan-configuration<br>创建vlan10<br>Vlan 10<br>为vlan10命名，即添加描述<br>name Bangong<br>配置示例：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ZTE(config)#switchvlan-configuration     </span><br><span class="line">ZTE(config-swvlan)#vlan 10    </span><br><span class="line">ZTE(config-swvlan-sub-10)#name banggong    </span><br><span class="line">ZTE(config-swvlan-sub-10)#exit    </span><br><span class="line">ZTE(config-swvlan)#exit    </span><br><span class="line">ZTE(config)#</span><br></pre></td></tr></table></figure>
<h1 id="三、端口加入VLAN"><a href="#三、端口加入VLAN" class="headerlink" title="三、端口加入VLAN"></a>三、端口加入VLAN</h1><p>配置ACCESS类型端口<br>全局模式下，进入switchvlan配置模式<br>switchvlan-configuration<br>进入gei-0/1/1/1<br>interface gei-0/1/1/1<br>配置端口模式为access模式<br>switchport mode access<br>配置端口所属vlan<br>switchport access vlan 10<br>配置示例： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ZTE(config)#    </span><br><span class="line">ZTE(config)#switchvlan-configuration      </span><br><span class="line">ZTE(config-swvlan)#interface gei-0&#x2F;1&#x2F;1&#x2F;1    </span><br><span class="line">ZTE(config-swvlan-if-gei-0&#x2F;1&#x2F;1&#x2F;11)#switchport mode access     </span><br><span class="line">ZTE(config-swvlan-if-gei-0&#x2F;1&#x2F;1&#x2F;11)#switchport access vlan 10    </span><br><span class="line">ZTE(config-swvlan-if-gei-0&#x2F;1&#x2F;1&#x2F;11)#exit    </span><br><span class="line">ZTE(config-swvlan)#exit    </span><br><span class="line">ZTE(config)#</span><br></pre></td></tr></table></figure>
<p>配置Trunk端口（Trunk端口用于交换机和交换机直接互联）<br>进入gei-0/1/1/28<br>interface gei-0/1/1/28<br>配置端口模式为trunk模式<br>switchport mode trunk<br>配置端口允许vlan通过10 20<br>switchport trunk vlan 10,20<br>配置示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ZTE(config)#    </span><br><span class="line">ZTE(config)#switchvlan-configuration      </span><br><span class="line">ZTE(config-swvlan)#interface gei-0&#x2F;1&#x2F;1&#x2F;28    </span><br><span class="line">ZTE(config-swvlan-if-gei-0&#x2F;1&#x2F;1&#x2F;28)#switchport mode trunk    </span><br><span class="line">ZTE(config-swvlan-if-gei-0&#x2F;1&#x2F;1&#x2F;28)#switchport trunk vlan 10,20    </span><br><span class="line">ZTE(config-swvlan-if-gei-0&#x2F;1&#x2F;1&#x2F;28)#exit    </span><br><span class="line">ZTE(config-swvlan)#exit    </span><br><span class="line">ZTE(config)#</span><br></pre></td></tr></table></figure>
<h1 id="四、配置接口-VLAN-IP"><a href="#四、配置接口-VLAN-IP" class="headerlink" title="四、配置接口 VLAN IP"></a>四、配置接口 VLAN IP</h1><p>全局模式下进入vlanif接口配置模式<br>进入vlan10 三层接口<br>interface vlan10<br>配置IP地址 192.168.1.1 掩码255.255.255.0<br>ip address 192.168.1.1 255.255.255.0<br>配置示例：    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ZTE(config)#interface vlan10    </span><br><span class="line">ZTE(config-if-vlan10)#ip address 192.168.1.1 255.255.255.0    </span><br><span class="line">ZTE(config-if-vlan10)#exit    </span><br><span class="line">ZTE(config)#</span><br></pre></td></tr></table></figure>
<h1 id="五、配置静态默认路由"><a href="#五、配置静态默认路由" class="headerlink" title="五、配置静态默认路由"></a>五、配置静态默认路由</h1><p>全局配置模式下，配置默认路由的下一跳为192.168.1.2<br>ip route 0.0.0.0 0.0.0.0 192.168.1.2<br>静态路由配置和默认路由配置命令一样，命令中前0.0.0.0 代表网络号，后面一个0.0.0.0代表掩码。这8个0则能代表所有网段。代码一个24未掩码的网段表示：192.168.2.0 255.255.255.0<br>配置静态路由：<br>ip route 192.168.2.0 255.255.255.0 192.168.1.2    </p>
<h1 id="六、配置生成树选项"><a href="#六、配置生成树选项" class="headerlink" title="六、配置生成树选项"></a>六、配置生成树选项</h1><p>生成树配置需要结合当地网络进行配置，要所有运行在一个拓扑能开启生成树功能的交换机，生成树配置一样。<br>中兴交换机在目前的网络环境中主要作为三层设备，不建议开启生成树。<br>全局模式下进入生成树配置<br>spantree<br>开启生成树功能<br>enable<br>配置生成树模式mstp<br>mode mstp<br>配置多实例域名test<br>mst name test<br>配置实例1包含vlan10,20<br>mst vlans 10,20 instance 1<br>配置示例：    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ZTE(config)#spantree     </span><br><span class="line">ZTE(config-stp)#enable    </span><br><span class="line">ZTE(config-stp)#mode mstp    </span><br><span class="line">ZTE(config-stp)#mst name test    </span><br><span class="line">ZTE(config-stp)#mst vlans 10,20 instance 1    </span><br><span class="line">ZTE(config-stp)#exit    </span><br><span class="line">ZTE(config)#</span><br></pre></td></tr></table></figure>
<h1 id="七、配置ACL访问控制策略"><a href="#七、配置ACL访问控制策略" class="headerlink" title="七、配置ACL访问控制策略"></a>七、配置ACL访问控制策略</h1><p>进入acl配置模式<br>数字可配置2000-2999,基础ACL配置，供电网络中采用基础acl#<br>配置一条允许24.50.0.67主机<br>rule 0 permit source 24.50.0.67 0.0.0.0<br>配置一条允许23.50.6.0网段<br>rule 5 permit source 23.50.6.0 0.0.0.255<br>剩余的全部禁止<br> rule 10 deny<br>配置acl注意匹配规则是从上往下匹配，比如rule10 deny已经拒绝了除0,5匹配到的，剩余的都是禁止。这时候rule 15 permit source 23.50.7.0 0.0.0.255，则该策略不生效，23.50.7.0网段还是被全部禁止。<br>配置示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ZTE#configure terminal     </span><br><span class="line">ZTE(config)#ipv4-access-list 2000    </span><br><span class="line">ZTE(config-ipv4-acl)# rule 0 permit source 24.50.0.67 0.0.0.0    </span><br><span class="line">ZTE(config-ipv4-acl)# rule 5 permit source 23.50.6.0 0.0.0.255    </span><br><span class="line">ZTE(config-ipv4-acl)# rule 10 deny    </span><br><span class="line">ZTE(config-ipv4-acl)# exit    </span><br><span class="line">ZTE(config)#</span><br></pre></td></tr></table></figure>
<h1 id="八、配置SSH远程登陆"><a href="#八、配置SSH远程登陆" class="headerlink" title="八、配置SSH远程登陆"></a>八、配置SSH远程登陆</h1><p>全局开启ssh服务<br>ssh server enable<br>配置ssh服务应用ACL访问控制策略2000<br>ssh server access-class ipv4 2000<br>配置示例： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZTE(config)#ssh server enable    </span><br><span class="line">ZTE(config)#ssh server access-class ipv4 2000</span><br></pre></td></tr></table></figure>

<h1 id="九、配置时钟同步和时区"><a href="#九、配置时钟同步和时区" class="headerlink" title="九、配置时钟同步和时区"></a>九、配置时钟同步和时区</h1><p>用户模式下配置时区为北京时区(加8小时)<br>ZTE(config)#clock timezone beijin 8<br>全局模式下配置时钟服务器10.109.192.5为第一个时钟服务器<br>(config)#ntp server 10.109.192.5 priority 5<br>全局模式下配置时钟服务器10.109.192.43为备用时钟服务器<br>(config)#ntp server 10.109.192.43 priority 4    </p>
<h1 id="十、备份和还原IOS"><a href="#十、备份和还原IOS" class="headerlink" title="十、备份和还原IOS"></a>十、备份和还原IOS</h1><p>在交换机全局模式下通过tftp备份iso固件到23.50.6.99服务器,中兴交换机固件名为HMPU.set<br>格式：copy tftp root：文件名 //服务器IP/文件名<br>copy  tftp root: /flash/HMPU.set //23.50.6.99/HMPU.set<br>在交换机下全局模式下通过tftp服务器还原IOS到交换机中<br>格式：tftp  服务器IP get 远程文件名 [本地文件名]<br>copy tftp //23.50.6.99/HMPU.set root: HMPU2.set<br>配置示例： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZTE#copy tftp root: HMPU.set &#x2F;&#x2F;23.50.6.99&#x2F;HMPU.set    </span><br><span class="line">ZTE#copy tftp &#x2F;&#x2F;23.50.6.99&#x2F;HMPU.set root: HMPU2.set</span><br></pre></td></tr></table></figure>
<p>Tftp服务器可以下载软件3CDaemon在电脑上运行即可。    </p>
<h1 id="十一、交换机常规巡检命令"><a href="#十一、交换机常规巡检命令" class="headerlink" title="十一、交换机常规巡检命令"></a>十一、交换机常规巡检命令</h1><p>查看三层接口Ip地址<br>show ip interface brief<br>查看二层接口状态信息<br>show interface brief<br>查看交换机的mac地址表<br>show mac table<br>查看交换机的arp表<br>show arp<br>查看交换机的生成树状态<br>show spantree instance 0<br>查看交换机版本<br>show version<br>查看交换机系统时间<br>show clock<br>查看交换机电源状态<br>show power<br>查看交换机风扇状态<br>show fan<br>查看交换机cpu和内存使用状态<br>show processor<br>查看交换机运行配置<br>show running-config<br>查看交换机日志告警<br>show logging alarm<br>查看日志文件<br>show logfile    </p>

        </div>
		<div class="card-content" >
			<!-- 《添加版权声明 -->
			
			<!-- 添加版权声明》 -->
		</div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7"><i class="fa fa-tag"></i></span>
                    <a class="has-link-grey -link" href="/tags/ZTE/" rel="tag">ZTE</a>, <a class="has-link-grey -link" href="/tags/%E4%B8%AD%E5%85%B4/" rel="tag">中兴</a>, <a class="has-link-grey -link" href="/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/" rel="tag">交换机</a>
                </div>
            </div>
        </div>
        
        
        
		</div>
    </div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2020/zte-port-sec/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">中兴交换机端口安全配置</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2020/swithc-h3c-01/">
                <span class="level-item">H3C交换机基础操作</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
                
                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div  align="center" class="container">
		<div class="container">
		<img src="https://static.dy208.cn/o_1dfilp8ruo521thr1hvf18ji17soa.png">
		<a href="http://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">皖ICP:0000号</a>
	</div>
	
        <!-- 不蒜子统计 -->
        <span id="busuanzi_container_site_pv">
                本站总访问量<span id="busuanzi_value_site_pv"></span>次
        </span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv" style='display:none'>
                本站访客数<span id="busuanzi_value_site_uv"></span>人
        </span>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
        <div>
            <div   class="level-start has-text-centered-mobile">
                <p align="center" class="is-size-7">
                &copy; 2020 光明常在&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                </p>
            </div>
        </div>
    </div>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'http://mmdav0.coding-pages.com',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'true'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>




<script src="/js/main.js" defer></script>

    
</body>
</html>